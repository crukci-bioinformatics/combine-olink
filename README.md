# Combine O-link

This little project combines our per-lane O-link counts and meta files into one. It performs these actions:

1. Combine the counts by summing the count for each file into a total per sample + forward barcode + reverse barcode.
2. Combine the totals in each "library" section each the meta file to give new totals for `reads` and `readsPf`,
and recalculates the `percentReadsPf` value.
3. Sums the `matchedCounts` across "read units" in each file into a total.
4. Changes the file name in `countsFileName` to be the name of the combined counts file.

## Usage

```BASH
python combineOLinkCounts.py [-f <path>] [-c <counts file>] [-m <meta file>] [--force]
```

* `<path>`: The path to a directory that contains the O-link files generated by CRUK-CI. This needs to be writable
as the combined files are written here too.
* `<counts file>`: The name of the combined counts file. Defaults to "olink_counts_total.csv".
* `<meta file>`: The name of the combined meta file. Defaults to "olink_counts_total.json".

`--force` causes the output files to overwrite any existing file. Normally this is prevented.

## Dependencies

You will need `pandas` and `argparse` in your Python installation. There is a `requirements.txt` file in
this repository that will add them to your environment.

```BASH
pip install -r requirements.txt
```
